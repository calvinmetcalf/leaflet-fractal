{"ts":1363608324392,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"﻿L.TileLayer.FractalLayer = L.TileLayer.Canvas.extend({\r\n\toptions: {\r\n\t\tasync: true\r\n\t},\r\n\tinitialize: function () {\r\n        \r\n\t\tvar _this = this;\r\n        \r\n\t\tthis._worker = new Worker('FractalRenderingWorker.js');\r\n        this._messages = [];\r\n        this._waitingMessage = null;\r\n        \r\n\t\tthis._worker.addEventListener('message', function(e) {\r\n            var msg = _this._waitingMessage;\r\n            //console.log('received', msg.id, _this._messages.length);\r\n            msg.callback(e.data.pixels, msg.date);\r\n            _this._waitingMessage = null;\r\n            _this._postNextMessage();\r\n\t\t}, false);\r\n        \r\n        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                \r\n            _this._messages.forEach(function(msg) {\r\n                if (msg.id === id) {\r\n                    msg.cancelled = true;\r\n                }\r\n            });\r\n        })\r\n\t},\r\n    _postNextMessage: function() {\r\n        if (this._waitingMessage) return;\r\n        while (this._messages.length) {\r\n            var msg = this._messages.shift();\r\n            \r\n            if (msg.cancelled) {\r\n                continue;\r\n            }\r\n            \r\n            this._waitingMessage = msg;\r\n            this._worker.postMessage({id: msg.id, x: msg.x, y: msg.y, z: msg.z});\r\n            break;\r\n        }\r\n    },\r\n\t_addMessage: function(callback, x, y, z) {\r\n\t\tvar id = x + ':' + y + ':' + z;\r\n\t\tthis._messages.push({x: x, y: y, z: z, id: id, callback: callback, date: new Date()});\r\n        this._postNextMessage();\r\n\t},\r\n    \r\n\tdrawTile: function (canvas, tilePoint) {\r\n        var _this = this,\r\n            z = this._map.getZoom();\r\n            \r\n        canvas._tileIndex = {x: tilePoint.x, y: tilePoint.y, z: z};\r\n\t\t\r\n\t\tthis._addMessage(function(array, date) {\r\n            var ctx = canvas.getContext('2d');\r\n            var imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n            _this.tileDrawn(canvas);\r\n\t\t}, tilePoint.x, tilePoint.y, z);\r\n\t}\r\n});\r\n\r\nL.TileLayer.boundaryCanvas = function (url, options) {\r\n\treturn new L.TileLayer.BoundaryCanvas(url, options);\r\n};"]],"start1":0,"start2":0,"length1":0,"length2":2244}]],"length":2244}
{"contributors":[],"silentsave":false,"ts":1363608389452,"patch":[[{"diffs":[[-1,"﻿"],[0,"L.Ti"]],"start1":0,"start2":0,"length1":5,"length2":4},{"diffs":[[0,"allback("],[1,"new Uint8ClampedArray("],[0,"e.data.p"]],"start1":488,"start2":488,"length1":16,"length2":38},{"diffs":[[0,"a.pixels"],[1,")"],[0,", msg.da"]],"start1":523,"start2":523,"length1":16,"length2":17}]],"length":2266,"saved":false}
{"ts":1363608471014,"patch":[[{"diffs":[[0,"    "],[-1,"//"],[0,"cons"]],"start1":407,"start2":407,"length1":10,"length2":8},{"diffs":[[0,"ack("],[-1,"new Uint8ClampedArray("],[0,"e.da"]],"start1":490,"start2":490,"length1":30,"length2":8},{"diffs":[[0,"a.pixels"],[-1,")"],[0,", msg.da"]],"start1":499,"start2":499,"length1":17,"length2":16}]],"length":2241,"saved":false}
{"ts":1363608508597,"patch":[[{"diffs":[[1,"var d=[];\r\n"],[0,"L.TileLayer.FractalL"]],"start1":0,"start2":0,"length1":20,"length2":31},{"diffs":[[0,"    "],[-1,"console.log('received', msg.id, _this._messages.length"],[1,"d.push(e.data.pixels"],[0,");\r\n"]],"start1":418,"start2":418,"length1":62,"length2":28}]],"length":2218,"saved":false}
{"ts":1363608589112,"patch":[[{"diffs":[[-1,"var d=[];\r\n"],[0,"L.Ti"]],"start1":0,"start2":0,"length1":15,"length2":4},{"diffs":[[0,"    "],[-1,"d.push(e.data.pixels"],[1,"console.log('received', msg.id, _this._messages.length"],[0,");\r\n"]],"start1":407,"start2":407,"length1":28,"length2":62},{"diffs":[[0,"allback("],[1,"new Uint8ClampedArray("],[0,"e.data.p"]],"start1":486,"start2":486,"length1":16,"length2":38},{"diffs":[[0,"a.pixels"],[1,")"],[0,", msg.da"]],"start1":521,"start2":521,"length1":16,"length2":17}]],"length":2264,"saved":false}
{"ts":1363608717101,"patch":[[{"diffs":[[1,"var d;\r\n"],[0,"L.TileLayer.FractalL"]],"start1":0,"start2":0,"length1":20,"length2":28},{"diffs":[[0,"        "],[1,"//"],[0,"console."]],"start1":411,"start2":411,"length1":16,"length2":18},{"diffs":[[0,"s.length);\r\n"],[1,"            d.push(new Uint8ClampedArray(e.data.pixels));\r\n"],[0,"            "]],"start1":467,"start2":467,"length1":24,"length2":83}]],"length":2333,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365421747977,"patch":[[{"diffs":[[-1,"var d;\r\n"],[0,"L.Ti"]],"start1":0,"start2":0,"length1":12,"length2":4},{"diffs":[[0,"nc: true"],[1,",\r\n\t\tmaxZoom:23"],[0,"\r\n\t},\r\n\t"]],"start1":74,"start2":74,"length1":16,"length2":31},{"diffs":[[0,"on ("],[-1,") {\r\n        \r\n\t\tvar _this = this;\r\n        \r\n\t\tthis._worker = new Worker('FractalRenderingWorker.js');\r\n        this._messages = [];\r\n        this._waitingMessage = null;\r\n        \r\n\t\tthis._worker.addEventListener('message', function(e) {\r\n            var msg = _this._waitingMessage;\r\n            //console.log('received', msg.id, _this._messages.length);\r\n            d.push(new Uint8ClampedArray(e.data.pixels));\r\n            msg.callback(new Uint8ClampedArray(e.data.pixels), msg.date);\r\n            _this._waitingMessage = null;\r\n            _this._postNextMessage();\r\n\t\t}, false);\r\n        \r\n        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                \r\n            _this._messages.forEach(function(msg) {\r\n                if (msg.id === id) {\r\n                    msg.cancelled = true;\r\n                }\r\n            });\r\n        })\r\n\t},\r\n    _postNextMessage: function() {\r\n        if (this._waitingMessage) return;\r\n        while (this._messages.length) {\r\n            var msg = this._messages.shift();\r\n            \r\n            if (msg.cancelled) {\r\n                continue;\r\n            }\r\n            \r\n            this._waitingMessage = msg;\r\n            this._worker.postMessage({id: msg.id, x: msg.x, y: msg.y, z: msg.z});\r\n            break;\r\n        }\r\n    },\r\n\t_addMessage: function(callback, x, y, z) {\r\n\t\tvar id = x + ':' + y + ':' + z;\r\n\t\tthis._messages.push({x: x, y: y, z: z, id: id, callback: callback, date: new Date()});\r\n        this._postNextMessage();\r\n\t},\r\n    "],[1,"workers) {\r\n\t\tvar workerFunc = function(data,cb) {\r\n\t\t\tvar scale = Math.pow(2, data.z - 1);\r\n\t\t\tvar x0 = data.x / scale - 1;\r\n\t\t\tvar y0 = data.y / scale - 1;\r\n\t\t\tvar d = 1/(scale<<8);\r\n\t\t\tvar pixels = new Array(262144);\r\n\t\t\tvar MAX_ITER=500;\r\n\t\t\tvar isOut,c,cx,cy,x,y,xn,yn,iii=0;\r\n\t\t\tfor (var py = 0; py < 256; py++) {\r\n\t\t\t\tfor (var px = 0; px < 256; px++) {\r\n\t\t\t\t\tcx = x0 + px*d;\r\n\t\t\t\t\tcy = y0 + py*d;\r\n\t\t\t\t\tx = 0; y = 0;\r\n\t\t\t\t\tisOut=0;\r\n\t\t\t\t\tfor (var iter = 0; iter < MAX_ITER; iter++) {\r\n\t\t\t\t\t\txn = x*x - y*y + cx;\r\n\t\t\t\t\t\tyn = ((x*y)*2) + cy;\r\n\t\t\t\t\t\tif (xn*xn + yn*yn > 4) {\r\n\t\t\t\t\t\t\tisOut=0.75;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tx = xn;\r\n\t\t\t\t\t\ty = yn;\r\n\t\t\t\t\t}\r\n\t\t\t\tc = (iter/MAX_ITER)*360;\r\n\t\t\t\t(function(h,s){\r\n\t\t\t\t\t//from http://schinckel.net/2012/01/10/hsv-to-rgb-in-javascript/\r\n\t\t\t\t\tvar v = 0.75;\r\n\t\t\t\t\tvar rgb, i, data = [];\r\n\t\t\t\t\tif (s === 0) {\r\n\t\t\t\t\t\trgb = [0.75, 0.1875, 0.75];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\th = h / 60;\r\n\t\t\t\t\t\ti = Math.floor(h);\r\n\t\t\t\t\t\tdata = [v*(1-s), v*(1-s*(h-i)), v*(1-s*(1-(h-i)))];\r\n\t\t\t\t\t\tswitch(i) {\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\trgb = [v, data[2], data[0]];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\trgb = [data[1], v, data[0]];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\trgb = [data[0], v, data[2]];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\trgb = [data[0], data[1], v];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\trgb = [data[2], data[0], v];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\trgb = [v, data[0], data[1]];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tpixels[iii++]=(rgb[0]*255);\r\n\t\t\t\t\t\tpixels[iii++]=(rgb[1]*255);\r\n\t\t\t\t\t\tpixels[iii++]=(rgb[2]*255);\r\n\t\t\t\t\t\tpixels[iii++]=(255);\r\n\t\t\t\t\t\r\n\t\t\t\t})(c,c===360?0:0.75)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar array = new Uint8ClampedArray(pixels);\r\n \t\t\tvar buf = array.buffer;\r\n\t\t\tcb({pixels: buf},[buf]);\r\n\t\t}\r\n\t\tvar _this = this;\r\n\t\tthis.workers=workers;\r\n\t\tthis._workers = new Array(workers);\r\n\t\tvar i = 0;\r\n\t\twhile(i<workers){\r\n\t\tthis._workers[i]=communist(workerFunc);\r\n\t\ti++\r\n\t\t}\r\n\t},"],[0,"\r\n\td"]],"start1":123,"start2":123,"length1":1601,"length2":1933},{"diffs":[[0,"int) {\r\n"],[-1,"        "],[1,"\t\t"],[0,"var _thi"]],"start1":2089,"start2":2089,"length1":24,"length2":18},{"diffs":[[0," this,\r\n"],[-1,"            "],[1,"\t\t"],[0,"z = this"]],"start1":2110,"start2":2110,"length1":28,"length2":18},{"diffs":[[0,");\r\n"],[-1,"            \r\n        "],[1,"\t\t"],[0,"canv"]],"start1":2142,"start2":2142,"length1":30,"length2":10},{"diffs":[[0,"};\r\n"],[-1,"\t\t\r\n"],[0,"\t\tthis._"],[-1,"addMessage(function(array, date) {\r\n            "],[1,"workers[parseInt((Math.random()*this.workers),10)].data({x: tilePoint.x, y:tilePoint.y, z: z}).then(function(data) {\r\n\t\t\tvar array=new Uint8ClampedArray(data.pixels);\r\n\t\t\t"],[0,"var "]],"start1":2205,"start2":2205,"length1":68,"length2":187},{"diffs":[[0,"'2d');\r\n"],[-1,"            "],[1,"\t\t\t"],[0,"var imag"]],"start1":2416,"start2":2416,"length1":28,"length2":19},{"diffs":[[0,");\r\n"],[-1,"            "],[1,"\t\t\t"],[0,"_thi"]],"start1":2544,"start2":2544,"length1":20,"length2":11},{"diffs":[[0,"\n\t\t}"],[-1,", tilePoint.x, tilePoint.y, z"],[0,");\r\n"]],"start1":2576,"start2":2576,"length1":37,"length2":8},{"diffs":[[0,");\r\n"],[-1,"\r\n"],[0,"L."],[-1,"T"],[1,"t"],[0,"ileL"]],"start1":2589,"start2":2589,"length1":13,"length2":11},{"diffs":[[0,"yer."],[-1,"boundaryCanvas = function (url, option"],[1,"fractalLayer=function(worker"],[0,"s)"],[-1," "],[0,"{\r\n\t"]],"start1":2601,"start2":2601,"length1":49,"length2":38},{"diffs":[[0,"yer."],[-1,"BoundaryCanvas(url, option"],[1,"FractalLayer(worker"],[0,"s);\r\n}"],[-1,";"],[1,"\r\n"]],"start1":2658,"start2":2658,"length1":37,"length2":31}]],"length":2689,"saved":false}
{"ts":1365421779487,"patch":[[{"diffs":[[0,"kers);\r\n"],[1,"        communist.IEpath = \"ie.js\";\r\n"],[0,"\t\tvar i "]],"start1":1951,"start2":1951,"length1":16,"length2":53}]],"length":2726,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365421937101,"patch":[[{"diffs":[[1,"\r\n\r\n"],[0,"L.TileLayer.FractalLayer = L"]],"start1":0,"start2":0,"length1":28,"length2":32},{"diffs":[[0,"xZoom:23"],[1,",\r\n\t\tcontinuousWorld:true"],[0,"\r\n\t},\r\n\t"]],"start1":93,"start2":93,"length1":16,"length2":41},{"diffs":[[0,"kers"],[-1,") {\r\n\t\tvar workerFunc = function(data,cb) {\r\n\t"],[1,",fractal) {\r\n\tvar fractalType,mi;\r\n\t\tfractal=fractal||\"mandlebrot\";\r\n\tthis.fractals = {\r\n\t\tmandlebrot:{\r\n\t\tfractalType:\"xn = x*x - y*y + cx;\\n\\\r\n\t\t\t\t\tyn = ((x*y)*2) + cy;\",\r\n\t\tmi:500\r\n\t\t},\r\n\t\tmultibrot3:{\r\n\t\tfractalType:\"xn=Math.pow(x,3)-3*x*Math.pow(y,2) + cx;\\n\\\r\n\t\t\t\t\tyn=3*Math.pow(x,2)*y-Math.pow(y,3) + cy;\",\r\n\t\tmi:200\r\n\t},\r\n\tmultibrot5:{\r\n\t\tfractalType:\"xn=Math.pow(x,5)-(10*Math.pow(x,3)*Math.pow(y,2))+(5*x*Math.pow(y,4)) + cx;\\n\\\r\n\t\t\t\t\tyn=(5*Math.pow(x,4)*y)-(10*x*x*Math.pow(y,3))+Math.pow(y,5) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\t\"burning ship\":{\r\n\t\tfractalType:\"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn = 2*Math.abs(x*y) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\ttricorn:{\r\n\t\tfractalType : \"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn =(x+x)*(-y) + cy;\",\r\n\t\tmi:500\r\n\t\r\n\t},\r\n\tjulia:{\r\n\t\tfractalType : \"cr = 0.1;\\n\\\r\n\t\tci = -0.1;\\n\\\r\n\t\txn = cr*x-ci*y+cx;\\n\\\r\n\t\t\t\t\tyn = 2*(cr*x+ci*y)+cy;\",\r\n\t\tmi:50\r\n\t}\r\n}\r\n\r\n\r\n\t\tcommunist.IEpath=\"ie.js\";\r\n\t\tthis.workers=workers;\r\n\t\tthis.workerFunc=Mustache.render(this.template,this.fractals[fractal]);\r\n\t\t},\r\n\t\tonAdd:function(map){\r\n\t\tvar _this = this;\r\n\t\tthis._workers = new Array(_this.workers);\r\n\t\tvar i = 0;\r\n\t\twhile(i<_this.workers){\r\n\t\tthis._workers[i]=communist(_this.workerFunc);\r\n\t\ti++\r\n\t\t}\r\n\t\treturn L.TileLayer.Canvas.prototype.onAdd.call(this,map);\r\n\t},\r\n\tonRemove:function(map){\r\n\tvar len = this._workers.length;\r\n\tvar i =0;\r\n\twhile(i<len){\r\n\tthis._workers[i].close();\r\n\ti++;\r\n\t}\r\n\treturn L.TileLayer.Canvas.prototype.onRemove.call(this,map);\r\n\t},\r\n\tdrawTile: function (canvas, tilePoint) {\r\n\t\tvar _this = this,\r\n\t\tz = this._map.getZoom();\r\n\t\tcanvas._tileIndex = {x: tilePoint.x, y: tilePoint.y, z: z};\r\n\t\tthis._workers[parseInt((Math.random()*this.workers),10)].data({x: tilePoint.x, y:tilePoint.y, z: z}).then(function(data) {\r\n\t\t\tvar array=new Uint8ClampedArray(data.pixels);\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\t_this.tileDrawn(canvas);\r\n\t\t});\r\n\t},\r\n\ttemplate:\"function(data,cb) {\\n\\\r\n"],[0,"\t\tva"]],"start1":159,"start2":159,"length1":54,"length2":2040},{"diffs":[[0,".z - 1);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar x0 "]],"start1":2225,"start2":2225,"length1":20,"length2":21},{"diffs":[[0,"/ scale - 1;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar y0 = da"]],"start1":2255,"start2":2255,"length1":28,"length2":29},{"diffs":[[0,"ale - 1;"],[1,"\\n\\\r\n\t//x0,y0 tile offset\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar d ="]],"start1":2293,"start2":2293,"length1":20,"length2":46},{"diffs":[[0,"ale<<8);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar pix"]],"start1":2345,"start2":2345,"length1":20,"length2":21},{"diffs":[[0,"262144);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar MAX"]],"start1":2382,"start2":2382,"length1":20,"length2":21},{"diffs":[[0,"TER="],[-1,"500;"],[1,"{{mi}};\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar "],[-1,"isOut,"],[0,"c,cx,cy,"],[1,"cr,ci,"],[0,"x,y,"]],"start1":2405,"start2":2405,"length1":35,"length2":39},{"diffs":[[0,",yn,"],[-1,"iii=0;\r\n\t\t"],[1,"dn,zr,zi,iii=0;\\n\\\r\n\t//c = value\\n\\\r\n\t//cx,cy = absolute coords\\n\\\r\n\t//px,px are pixel coords\\n\\\r\n"],[0,"\tfor"]],"start1":2446,"start2":2446,"length1":18,"length2":106},{"diffs":[[0," py++) {"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\tfor (v"]],"start1":2575,"start2":2575,"length1":20,"length2":21},{"diffs":[[0," px++) {"],[1,"\\n\\"],[0,"\r\n\t\t\t"],[-1,"\t"],[-1,"\t"],[0,"cx = x0 "]],"start1":2616,"start2":2616,"length1":23,"length2":24},{"diffs":[[0," + px*d;"],[1,"\\n\\"],[0,"\r\n\t\t\t"],[-1,"\t\t"],[0,"cy = y0 "]],"start1":2639,"start2":2639,"length1":23,"length2":24},{"diffs":[[0," + py*d;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\tx = 0"]],"start1":2662,"start2":2662,"length1":20,"length2":21},{"diffs":[[0,"= 0;"],[-1,"\r\n\t\t\t\t\tisOut=0;\r\n\t\t"],[1,"\\n\\\r\n"],[0,"\t\t\tf"]],"start1":2687,"start2":2687,"length1":27,"length2":13},{"diffs":[[0,"+) {"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t\txn = x*x - y*y + cx;\r\n\t\t\t\t\t\tyn = ((x*y)*2) + cy;\r\n\t\t"],[1,"{{fractalType}}\\n\\\r\n"],[0,"\t\t\t\t"]],"start1":2740,"start2":2740,"length1":68,"length2":37},{"diffs":[[0,"4) {"],[-1,"\r\n\t\t\t\t\t\t\tisOut=0.75;\r\n\t\t"],[1,"\\n\\\r\n"],[0,"\t\t\t\t"]],"start1":2797,"start2":2797,"length1":32,"length2":13},{"diffs":[[0,"eak;"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t\t}\r\n\t\t"],[1,"}\\n\\\r\n"],[0,"\t\t\t\t"]],"start1":2813,"start2":2813,"length1":21,"length2":23},{"diffs":[[0," xn;"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t\t"],[0,"y = yn;"],[1,"\\n\\"],[0,"\r\n\t\t\t"],[-1,"\t"],[-1,"\t}\r\n\t\t"],[1,"}\\n\\\r\n"],[0,"\t\tc "]],"start1":2839,"start2":2839,"length1":35,"length2":38},{"diffs":[[0,"ER)*360;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t(funct"]],"start1":2891,"start2":2891,"length1":20,"length2":21},{"diffs":[[0,"on(h,s){"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t//fro"]],"start1":2913,"start2":2913,"length1":20,"length2":21},{"diffs":[[0,"ascript/"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\tvar v"]],"start1":2985,"start2":2985,"length1":20,"length2":21},{"diffs":[[0," = 0.75;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\tvar r"]],"start1":3006,"start2":3006,"length1":20,"length2":21},{"diffs":[[0,"ta = [];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\tif (s"]],"start1":3036,"start2":3036,"length1":20,"length2":21},{"diffs":[[0,"=== 0) {"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\trgb "]],"start1":3058,"start2":3058,"length1":20,"length2":21},{"diffs":[[0,"75];"],[1,"\\n\\"],[0,"\r\n\t\t\t"],[-1,"\t\t"],[0,"} else {"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t"],[-1,"\t"],[0,"h = "]],"start1":3098,"start2":3098,"length1":31,"length2":33},{"diffs":[[0," h / 60;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\ti = "]],"start1":3130,"start2":3130,"length1":20,"length2":21},{"diffs":[[0,"loor(h);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\tdata"]],"start1":3157,"start2":3157,"length1":20,"length2":21},{"diffs":[[0,"h-i)))];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\tswit"]],"start1":3217,"start2":3217,"length1":20,"length2":21},{"diffs":[[0,"i) {"],[1,"\\n\\"],[0,"\r\n\t\t\t\t\t"],[-1,"\t\t"],[0,"case 0:"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t"]],"start1":3241,"start2":3241,"length1":28,"length2":30},{"diffs":[[0,"ta[2], data[0]];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\tbreak;\r\n\t\t"]],"start1":3285,"start2":3285,"length1":36,"length2":37},{"diffs":[[0,"n\\\r\n\t\t\t\t\t\tbreak;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\tcase 1:\r\n\t\t"]],"start1":3302,"start2":3302,"length1":36,"length2":37},{"diffs":[[0,"\tcase 1:"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\trg"]],"start1":3327,"start2":3327,"length1":20,"length2":21},{"diffs":[[0,"ata[0]];"],[1,"\\n\\"],[0,"\r\n\t\t\t\t\t\t"],[-1,"\t"],[-1,"\t"],[0,"break;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\tcas"]],"start1":3366,"start2":3366,"length1":36,"length2":38},{"diffs":[[0,"\tcase 2:"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\trg"]],"start1":3400,"start2":3400,"length1":20,"length2":21},{"diffs":[[0,"ata[2]];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\tbr"]],"start1":3439,"start2":3439,"length1":20,"length2":21},{"diffs":[[0,"eak;"],[1,"\\n\\"],[0,"\r\n\t\t\t\t\t"],[-1,"\t"],[-1,"\t"],[0,"case 3:"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t"]],"start1":3460,"start2":3460,"length1":28,"length2":30},{"diffs":[[0,"data[1], v];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\tbreak;"]],"start1":3508,"start2":3508,"length1":28,"length2":29},{"diffs":[[0,"\t\t\t\t\t\tbreak;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\tcase 4:"]],"start1":3525,"start2":3525,"length1":28,"length2":29},{"diffs":[[0,"\tcase 4:"],[1,"\\n\\"],[0,"\r\n\t\t\t\t\t\t"],[-1,"\t\t"],[0,"rgb = [d"]],"start1":3546,"start2":3546,"length1":26,"length2":27},{"diffs":[[0,"[0], v];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\tbr"]],"start1":3585,"start2":3585,"length1":20,"length2":21},{"diffs":[[0,"\t\t\t\t\t\tbreak;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\tdefault"]],"start1":3598,"start2":3598,"length1":28,"length2":29},{"diffs":[[0,"default:"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\trg"]],"start1":3620,"start2":3620,"length1":20,"length2":21},{"diffs":[[0,"ata[1]];"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\t\t\tbr"]],"start1":3659,"start2":3659,"length1":20,"length2":21},{"diffs":[[0,"eak;"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t\t}}\r\n\t\t"],[1,"}}\\n\\\r\n"],[0,"\t\t\t\t"]],"start1":3680,"start2":3680,"length1":22,"length2":24},{"diffs":[[0,"rgb[0]*255);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\tpixels[i"]],"start1":3719,"start2":3719,"length1":28,"length2":29},{"diffs":[[0,"rgb[1]*255);"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\t\t\t\tpixels[i"]],"start1":3755,"start2":3755,"length1":28,"length2":29},{"diffs":[[0,"2]*255);"],[1,"\\n\\"],[0,"\r\n\t\t\t\t"],[-1,"\t\t"],[0,"pixels[i"]],"start1":3795,"start2":3795,"length1":24,"length2":25},{"diffs":[[0,"55);"],[1,"\\n\\"],[0,"\r\n\t\t\t"],[-1,"\t"],[-1,"\t\r\n\t\t"],[1,"\\n\\\r\n"],[0,"\t\t})"]],"start1":3828,"start2":3828,"length1":19,"length2":21},{"diffs":[[0,".75)"],[1,"\\n\\"],[0,"\r\n\t\t"],[-1,"\t"],[-1,"\t}\r\n\t\t\t}"],[1,"}\\n\\\r\n\t}\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tvar"]],"start1":3863,"start2":3863,"length1":25,"length2":28},{"diffs":[[0,"pixels);"],[1,"\\n\\"],[0,"\r\n \t\t\tva"]],"start1":3922,"start2":3922,"length1":16,"length2":19},{"diffs":[[0,".buffer;"],[1,"\\n\\"],[0,"\r\n"],[-1,"\t\t"],[0,"\tcb({pix"]],"start1":3954,"start2":3954,"length1":20,"length2":21},{"diffs":[[0,"f]);"],[-1,"\r\n\t\t}\r\n\t\tvar _this = this;\r\n\t\tthis.workers=workers;\r\n\t\tthis._workers = new Array(workers);\r\n        communist.IEpath = \"ie.js\";\r\n\t\tvar i = 0;\r\n\t\twhile(i<workers){\r\n\t\tthis._workers[i]=communist(workerFunc);\r\n\t\ti++\r\n\t\t}\r\n\t},\r\n\tdrawTile: function (canvas, tilePoint) {\r\n\t\tvar _this = this,\r\n\t\tz = this._map.getZoom();\r\n\t\tcanvas._tileIndex = {x: tilePoint.x, y: tilePoint.y, z: z};\r\n\t\tthis._workers[parseInt((Math.random()*this.workers),10)].data({x: tilePoint.x, y:tilePoint.y, z: z}).then(function(data) {\r\n\t\t\tvar array=new Uint8ClampedArray(data.pixels);\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\t_this.tileDrawn(canvas);\r\n\t\t});\r\n\t}"],[1,"\\n\\\r\n}\""],[0,"\r\n})"]],"start1":3988,"start2":3988,"length1":764,"length2":15},{"diffs":[[0,"tion(workers"],[1,",fractal"],[0,"){\r\n\treturn "]],"start1":4035,"start2":4035,"length1":24,"length2":32},{"diffs":[[0,"ayer(workers"],[1,",fractal"],[0,");\r\n}\r\n"]],"start1":4091,"start2":4091,"length1":19,"length2":27}]],"length":4118,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365422080829,"patch":[[{"diffs":[[-1,"\r\n\r\n"],[0,"L.TileLa"]],"start1":0,"start2":0,"length1":12,"length2":8}]],"length":4114,"saved":false}
