{"ts":1363608326784,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"﻿var MAX_ITER = 500;\r\n\r\n//The following parameters are expected:\r\n// * id - unique message identificator\r\n// * x, y, z: tile index to generate picture for\r\n\r\n// Return message has the folloing parameters:\r\n// * id - same identificator\r\n// * array - Uint8ClampedArray array with tile's data\r\nself.addEventListener('message', function(e) {\r\n    var id = e.data.id;\r\n    \r\n    var scale = Math.pow(2, e.data.z - 1);\r\n    var x0 = e.data.x / scale - 1;\r\n    var y0 = e.data.y / scale - 1;\r\n    \r\n    var d = 1/(256*scale);\r\n    var pixels = [];\r\n    \r\n    for (var py = 0; py < 256; py++) {\r\n        for (var px = 0; px < 256; px++) {\r\n        \r\n            var cx = x0 + px*d;\r\n            var cy = y0 + py*d;\r\n        \r\n            var x = 0, y = 0;\r\n            var xn, yn;\r\n            \r\n            var isOut = false;\r\n            \r\n            for (var iter = 0; iter < MAX_ITER; iter++) {\r\n                xn = x*x - y*y + cx;\r\n                yn = 2*x*y + cy;\r\n                \r\n                if (xn*xn + yn*yn > 4) {\r\n                    isOut = true;\r\n                    break;\r\n                }\r\n                \r\n                x = xn;\r\n                y = yn;\r\n            }\r\n            \r\n            var c = iter/MAX_ITER*255;\r\n            \r\n            pixels.push(0);\r\n            pixels.push(c);\r\n            pixels.push(0);\r\n            pixels.push(255);\r\n        }\r\n    }\r\n    \r\n    var array = new Uint8ClampedArray(pixels)\r\n\tself.postMessage({id: id, pixels: array});\r\n    \r\n}, false);"]],"start1":0,"start2":0,"length1":0,"length2":1508}]],"length":1508}
{"contributors":[],"silentsave":false,"ts":1363608357821,"patch":[[{"diffs":[[-1,"﻿"],[0,"var "]],"start1":0,"start2":0,"length1":5,"length2":4},{"diffs":[[0,"s: array"],[-1,"}"],[1,".buffer},array.buffer"],[0,");\r\n    "]],"start1":1478,"start2":1478,"length1":17,"length2":37}]],"length":1527,"saved":false}
{"ts":1363608461539,"patch":[[{"diffs":[[0,"rray"],[-1,".buffer},array.buffer"],[1,"}"],[0,");\r\n"]],"start1":1482,"start2":1482,"length1":29,"length2":9}]],"length":1507,"saved":false}
{"ts":1363608681484,"patch":[[{"diffs":[[0,"(pixels)"],[1,";\r\n    var buf = array.buffer;"],[0,"\r\n\tself."]],"start1":1436,"start2":1436,"length1":16,"length2":46},{"diffs":[[0,"ls: "],[-1,"array}"],[1,"buf},buf"],[0,");\r\n"]],"start1":1507,"start2":1507,"length1":14,"length2":16}]],"length":1539,"saved":false}
